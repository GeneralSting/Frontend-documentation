# createRoot

- lets to create a root to display React components inside browser DOM node

```jsx
const root = createRoot(domNode, options?)
```

## Reference

- reference: `createRoot(domNode, options)`
- React will create a root for the `domNode`, and take over managing the DOM inside it
  - after creating root, calling `root.render` displays React component inside it
- app fully built with React will usually only have one `createRoot` call for its root component
  - a page that uses “sprinkles” of React for parts of the page may have as many separate roots as needed
- parameters:
  - **domNode** - DOM element, React will create root for this DOM element and allow function calls on the root, such as `render` to display rendered React content
  - optional **options** - object with options for this React root
    - optional **onCaughtError** - callback called when React catches an error in an `Error Boundary`. Called with the **error** caught by the Error Boundary, and an **errorInfo** object containing the `componentStack`
    - optional **onUncaughtError** - callback called when an error is thrown and not caught by an `Error Boundary`. Called with the **error** that was thrown, and an **errorInfo** object containing the `componentStack`
    - optional **onRecoverableError** - callback called when React automatically recovers from errors. Called with an **error** React throws, and an **errorInfo** object containing the `componentStack`. Some recoverable errors may include the original error cause as **error.cause**
    - optional **identifierPrefix** - string prefix React uses for IDs generated by `useId`. Useful to avoid conflicts when using multiple roots on the same page
- returns:
  - object with two methods: `render` and `unmount`

### Caveats

- if app is server-rendered, using `createRoot` is not supported, use `hydrateRoot` instead
- likely have only one `createRoot`
- when we want to render a piece of JSX in a different part of the DOM tree that is not child of our component, use `createPortal` instead of `createRoot`

### root.render(reactNode)

- Call it to display a piece of JSX (“React node”) into the React root’s browser DOM node

  ```jsx
  root.render(<App />);
  ```

  - React will display `<App />` in the root, and take over managing the DOM inside it

- parameters:
  - **reactNode** - React node we want to display
    - can be React element constructed with `createElement`, string, number, `null` or `undefined`
- returns:
  - `undefined`

#### Caveats

- first time calling `root.render`, React will clear all existing HTML content inside the React root before rendering the React component into it
- if root's DOM contains HTML generated by React on the server or during the build, use `hydrateRoot()` instead, which attaches the event handlers to the existing HTML
- calling render on the same root more than once, React will update the DOM as necessary to reflect the latest JSX you passed

### root.unmount()

- call it to destroy rendered tree inside a React root

  ```jsx
  root.unmount();
  ```

- app usually will not have any calls to the `root.unmount`
- mostly useful if our React root's DOM node or any of its ancestors may be removed from the DOM by some other code
- calling `root.unmount` will unmount all the components in the root and “detach” React from the root DOM node, including removing any event handlers or state in the tree

- parameters:
  - does not accept any parameters
- returns:
  - `undefined`

#### Caveats

- `root.unmount` will unmount all the components in the tree and “detach” React from the root DOM node
- once called `root.unmount` cannot be called `root.render` again on the same root
  - attempting to call `root.render` on an unmounted root will throw a “Cannot update an unmounted root” error
  - we can create a new root for the same DOM node after the previous root for that node has been unmounted
